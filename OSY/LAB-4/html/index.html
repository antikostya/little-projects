<!DOCTYPE html>
<!-- main page.html -->
<html>
<head>
	<meta http-equiv = "content-type" content = "text/html; charset = utf-8">
	<title> LAB-4 </title>
	<style type="text/css">
		html
		{
			overflow: hidden;
			background: url(https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/backgrounds/BG_1.jpg) no-repeat center center fixed; 
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}
	</style>
	<style type="text/css">
		.anime-left
		{
			position: absolute;
			height: 100%;
			width: 30%;
			bottom: 0px;
			left: -2%;
			/*border: solid 1px red;*/
			/*background: #afa;*/
		}
		.anime-left img
		{
			position: absolute;
			left: 0;
			bottom: 0;
			width: 102%;
		}
		.anime-right {
			position: absolute;
			height: 100%;
			width: 30%;
			bottom: 0px;
			right: -2%;
			/*border: solid 1px red;*/
			/*background: #afa;*/
		}
		.anime-right img
		{
			position: absolute;
			right: 0;
			bottom: 0;
			width: 115%;
		}
		.title {
			position: absolute; /* text color #490048 */
			width: 99%;
			height: 230px;
			top: 50px;
			z-index: 4;
			/*background: #afa;
			border: solid 1px darkgreen;*/
		}
		.left_panel
		{
			position: absolute;
			height: 700px;
			width: 500px;
			top: 270px;
			left: 20%;
			z-index: 4;
			/*border: solid 1px red;*/
		}
		.left_panel img
		{
			position: absolute;
		}
		.left_panel_font
		{
			position: relative;
			top: 50px;
			left: 20%;
		}
		.left_panel_buttons
		{
			position: relative;
			top: 400px;
		}
		.leds_text
		{
			position: absolute;
			top: 340px;
			left: 160px;
		}
		.leds
		{
			position: relative;
			top: 450px;
			left: 20px;
			/*border: solid 1px black; */
		}
		.led0
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 30px;
			border: solid 1px black; 
		}
		.led1
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 100px;
			border: solid 1px black; 
		}
		.led2
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 170px;
			border: solid 1px black; 
		}
		.led3
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 240px;
			border: solid 1px black; 
		}
		.led4
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 310px;
			border: solid 1px black; 
		}
		.led5
		{
			width: 40px;
			height: 40px;
			position: absolute;
			left: 380px;
			border: solid 1px black; 
		}
		.right_panel
		{
			position: absolute;
			height: 700px;
			width: 500px;
			top: 270px;
			right: 20%;
			z-index: 4;
			/*border: solid 1px red;*/
		}
		.right_panel img
		{
			position: absolute;
		}
		.right_panel_font
		{
			position: relative;
			top: 50px;
			left: 40%;
		}
		.button {
			position: absolute;
			padding: 10px; /* idend top and bottom of object */
			width: 70px;
			height: 70px;
			left: 435px;
			z-index: 6;
			/*border: solid 1px black;*/
		}
		img.title_scale
		{
			-moz-transition: all 0.3s ease;
			-webkit-transition: all 0.3s ease;
			-o-transition: all 0.3s ease;
			transition: all 0.3s ease;
		}
		img.title_scale:hover
		{
			transform: scale(1.1); /* effect for other browsers */
		}
		img.scale {
			transition: all 0.2s cubic-bezier(0.19, 1, 0.22, 1);
		}
		img.scale:hover {
			transform: scale(1.15); /* effect for other browsers */
		}
		img.rotate {
			-moz-transition: all 1s ease;
			-webkit-transition: all 1s ease;
			-o-transition: all 1s ease;
			transition: all 1s ease;
		}
		img.rotate:hover {
			-moz-transform: rotate(360deg) scale(1.1);
			-webkit-transform: rotate(360deg) scale(1.1);  
			-o-transform: rotate(360deg) scale(1.1); 
			-ms-transform: rotate(360deg) scale(1.1);
			transform: rotate(360deg) scale(1.5);
		}
		#title_font { top: 10px; left: 10px; }
		#button_0 { left: 20px; top: 120px; }
		#button_1 { left: 130px; top: 120px; }
		#button_2 { left: 240px; top: 120px; }
		#button_3 { left: 350px; top: 120px; }
		#var_1 { left: 120px; top: 220px; }
		#var_2 { left: 260px; top: 220px; }

		.right_panel_content
		{
			position: absolute;
			height: 700px;
			top: 270px;
			z-index: 6;
		}
		.social
		{
			position: absolute;
			width: 65px;
			height: 65px;
			top: 600px;
			z-index: 6;
			/* border: solid 1px black; */
		}
		#right_panel_text
		{
			top: 130px;
			left: 50px;
			width: 400px;
			height: 450px;
			/*border: solid 1px black;*/
		} 
		#vk { left: 80px; }
		#git { left: 200px; }
		#insta { left: 320px; }
	</style>
</head>
<body>
	<div class="anime-left", id="anime_left">
		<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/anime/anime_1.png">
	</div>
	<div class="anime-right", id="anime_right", align="right">
		<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/anime/anime_2.png">
	</div>

	<div class="title", id="title_bg", align="center">
		<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/menu/title_bg.png", alt="">
		<div class="title", id="title_font", align="center">
			<a href="main.html">
				<img class="title_scale", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/fonts/title.png", alt="">
			</a>
		</div>
	</div>
	<div class="left_panel", align="left">
		<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/menu/menu_main.png">
		<div class="left_panel_font">
			<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/fonts/controls.png">
		</div>
		<div class="button", id="button_0">
			<img class="scale", src="images/buttons/button_1.png", alt="", onclick="send_data('BUTTON0: clicked');">
		</div>
		<div class="button", id="button_1", onclick="send_data('BUTTON1: clicked');">
			<img class="scale", src="images/buttons/button_2.png", alt="">
		</div>
		<div class="button", id="button_2", onclick="send_data('BUTTON2: clicked');">
			<img class="scale", src="images/buttons/button_3.png", alt="">
		</div>
		<div class="button", id="button_3", onclick="send_data('BUTTON3: clicked');">
			<img class="scale", src="images/buttons/button_4.png", alt="">
		</div>
		<div class="button", id="var_1", onclick="send_data('BUTTON4: clicked');">
			<img class="scale", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/buttons/var_1.png", alt="">
		</div>
		<div class="button", id="var_2", onclick="send_data('BUTTON5: clicked');">
			<img class="scale", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/buttons/var_2.png", alt="">
		</div>
		<div class="leds_text">
			<img src="images/buttons/leds.png">
		</div>
		<div class="leds">
			<div class="led0", id="led0">
				<!-- <label id="LED0", style="font-size: 22px">░░</label> -->
			</div>
			<div class="led1", id="led1">
				<!-- <label id="LED1", style="font-size: 22px; color: #490048">░░</label> -->
			</div>
			<div class="led2", id="led2">
				<!-- <label id="LED2", style="font-size: 22px; color: #490048">░░</label> -->
			</div>
			<div class="led3", id="led3">
				<!-- <label id="LED3", style="font-size: 22px; color: #490048">░░</label> -->
			</div>
			<div class="led4", id="led4">
				<!-- <label id="LED4", style="font-size: 22px; color: #490048">░░</label> -->
			</div>
			<div class="led5", id="led5">
				<!-- <label id="LED5", style="font-size: 22px; color: #490048">░░</label> -->
			</div>
		</div>

	</div>
	<div class="right_panel", align="left">
		<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/menu/menu_main.png">
		<div class="right_panel_font">
			<img src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/fonts/log.png">
		</div>
		<div class="right_panel_content", id="right_panel_text", align="center", face="Comic Sans MS", style="font-size: 22px; color: #490048">
			<label id="log">here will be log</label>
			<!-- <font face="Comic Sans MS"> -->
				<!-- <textarea style="font-size: 22px; color: #490048"> -->
				<!-- here will be log -->
				<!-- </textarea> -->
			<!-- </font> -->
		</div>
		<div class="social", id="vk", align="center">
			<a href="https://vk.com/idantikostya">
				<img class="rotate", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/buttons/vk_logo.png">
			</a>
		</div>
		<div class="social", id="git", align="center">
			<a href="https://github.com/antikostya">
				<img class="rotate", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/buttons/github_logo.png">
			</a>
		</div>
		<div class="social", id="insta", align="center">
			<a href="https://instagram.com/artworldview">
				<img class="rotate", src="https://raw.githubusercontent.com/antikostya/little-projects/main/OSY/LAB-4/html/images/buttons/insta_logo.png">
			</a>
		</div>
	</div>
</body>
</html>	

<script>

function data_view(key, value)
{
	let col_array = ['rgba(0,0,0,0)', 'green'];
	let disp_array = ['none', ''];

	switch (key) 
	{
		case "LEDCHAIN":
			// document.getElementById('led0').style.display = disp_array[value[0]];
			// document.getElementById('LED1').style.display = disp_array[value[1]];
			// document.getElementById('LED2').style.display = disp_array[value[2]];
			// document.getElementById('LED3').style.display = disp_array[value[3]];
			// document.getElementById('LED4').style.display = disp_array[value[4]];
			// document.getElementById('LED5').style.display = disp_array[value[5]];

			document.getElementById('led0').style.backgroundColor = col_array[value[0]];
			document.getElementById('led1').style.backgroundColor = col_array[value[1]];
			document.getElementById('led2').style.backgroundColor = col_array[value[2]];
			document.getElementById('led3').style.backgroundColor = col_array[value[3]];
			document.getElementById('led4').style.backgroundColor = col_array[value[4]];
			document.getElementById('led5').style.backgroundColor = col_array[value[5]];
			break ;

		case "LED0":
		case "LED1":
		case "LED2":
		case "LED3":
			document.getElementById(key).style.backgroundColor = value;
			break ;
	}
	var d = new Date();
	var time = String(d.getHours()).padStart(2, '0') + ":";
	time += String(d.getMinutes()).padStart(2, '0') + ":";
	time += String(d.getSeconds()).padStart(2, '0');
	document.getElementById("log").value = time + ": " + key + ': ' + value + "\n" +
	document.getElementById("log").value;
}

function data_request() {
	const xhr = new XMLHttpRequest();
	xhr.open('GET', 'readdata');
	xhr.onreadystatechange = function()
	{
		if (xhr.readyState !== 4 || xhr.status !== 200)
			return;
		var response = xhr.responseText;
		console.log('got %s', response);
		var msgs = response.split("\n");
		for (var i = 0; i < msgs.length; ++i)
		{
			console.log('parsing %s', msgs[i]);
			var msg = msgs[i].split(": ");
			data_view(msg[0], msg[1]);
		}
		window.setTimeout(data_request, 0);
	};
	xhr.send();
}

data_request();

function send_data (data) {
	const xhr = new XMLHttpRequest();	
	xhr.open("POST", "writedata");
	xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
	console.log('sending %s', data);
	xhr.send(data+ "\r\n\r\n");
}

</script>
